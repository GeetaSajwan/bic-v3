<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Tests against Build</title>
    <link rel="stylesheet" href="assets/mocha.css" />

    <!-- mocha + chai + sinon-->
    <script src="assets/mocha.js"></script>
    <script src="assets/chai.js"></script>
    <script src="assets/sinon-chai.js"></script>
    <script src="assets/sinon.js"></script>

    <!-- global stuff-->
    <script src="https://cdnp.blinkm.co/blink/require/6/require.min.js"></script>
    <script src="../js/bic.js"></script>
    <!-- code coverage -->
    <script>
//        if (navigator.userAgent.indexOf('PhantomJS') < 0) {
//            console.log('Not in PhantomJS, loading code coverage tool');
//            document.write('<script src="assets/blanket.min.js" data-cover-adapter="assets/mocha-blanket.js" data-cover-only="//^...scripts/" data-cover-never="//vendor/"></' + 'script>');
//        }
    </script>

    <!-- environment variables (normally in php) -->
    <script>
        mocha.setup('bdd');
        mocha.setup({ignoreLeaks: true});
        mocha.globals(['script*', 'jQuery*']);
        var should = chai.should();
        var expect = chai.expect;

        window.BMP= {
          BIC: {
            siteVars: {
              answerSpace: 'Exists',
              answerSpaceId: 1
            }
          },
          FileInput: {
            initialize: function () {
                return "hello!";
            }
          }
        };
        window.Modernizr = {indexeddb: false};
        window.BlinkForms = {};
        require(['backbone'], function () {
          Backbone.sync = function () {return arguments;}
        });
        require(['jquerymobile'], function () {
          $.mobile = {
            loading: function () {},
            path: {
              parseUrl: function () {
                return {
                  hrefNoSearch: "/test",
                  search: ""
                }
              }
            },
            showPageLoadingMsg: function () {},
            pageLoadErrorMessageTheme: {},
            pageLoadErrorMessage: {}
          };
        });


        require(['bic']);

    </script>
</head>
<body>
    <div id="mocha"></div>
</body>
</html>
