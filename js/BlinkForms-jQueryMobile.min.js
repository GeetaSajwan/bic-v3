(function(e){"function"==typeof define&&define.amd?define(["jquery","underscore","backbone","rivets","q","jquerymobile"],e):e($,_,Backbone,rivets,Q)
})(function(e,t,n,i,s){"use strict";var a,r,l,o=window.BlinkForms={};return function(e){function t(e,t){return x.call(e,t)
}function n(e,t){var n,i,s,a,r,l,o,m,u,d,c=t&&t.split("/"),v=w.map,h=v&&v["*"]||{};
if(e&&"."===e.charAt(0))if(t){for(c=c.slice(0,c.length-1),e=c.concat(e.split("/")),m=0;e.length>m;m+=1)if(d=e[m],"."===d)e.splice(m,1),m-=1;
else if(".."===d){if(1===m&&(".."===e[2]||".."===e[0]))break;m>0&&(e.splice(m-1,2),m-=2)
}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((c||h)&&v){for(n=e.split("/"),m=n.length;m>0;m-=1){if(i=n.slice(0,m).join("/"),c)for(u=c.length;u>0;u-=1)if(s=v[c.slice(0,u).join("/")],s&&(s=s[i])){a=s,r=m;
break}if(a)break;!l&&h&&h[i]&&(l=h[i],o=m)}!a&&l&&(a=l,r=o),a&&(n.splice(0,r,a),e=n.join("/"))
}return e}function i(t,n){return function(){return v.apply(e,y.call(arguments,0).concat([t,n]))
}}function s(e){return function(t){return n(t,e)}}function o(e){return function(t){p[e]=t
}}function m(n){if(t(b,n)){var i=b[n];delete b[n],g[n]=!0,c.apply(e,i)}if(!t(p,n)&&!t(g,n))throw Error("No "+n);
return p[n]}function u(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]
}function d(e){return function(){return w&&w.config&&w.config[e]||{}}}var c,v,h,f,p={},b={},w={},g={},x=Object.prototype.hasOwnProperty,y=[].slice;
h=function(e,t){var i,a=u(e),r=a[0];return e=a[1],r&&(r=n(r,t),i=m(r)),r?e=i&&i.normalize?i.normalize(e,s(t)):n(e,t):(e=n(e,t),a=u(e),r=a[0],e=a[1],r&&(i=m(r))),{f:r?r+"!"+e:e,n:e,pr:r,p:i}
},f={require:function(e){return i(e)},exports:function(e){var t=p[e];return t!==void 0?t:p[e]={}
},module:function(e){return{id:e,uri:"",exports:p[e],config:d(e)}}},c=function(n,s,a,r){var l,u,d,c,v,w,x=[];
if(r=r||n,"function"==typeof a){for(s=!s.length&&a.length?["require","exports","module"]:s,v=0;s.length>v;v+=1)if(c=h(s[v],r),u=c.f,"require"===u)x[v]=f.require(n);
else if("exports"===u)x[v]=f.exports(n),w=!0;else if("module"===u)l=x[v]=f.module(n);
else if(t(p,u)||t(b,u)||t(g,u))x[v]=m(u);else{if(!c.p)throw Error(n+" missing "+u);
c.p.load(c.n,i(r,!0),o(u),{}),x[v]=p[u]}d=a.apply(p[n],x),n&&(l&&l.exports!==e&&l.exports!==p[n]?p[n]=l.exports:d===e&&w||(p[n]=d))
}else n&&(p[n]=a)},a=r=v=function(t,n,i,s,a){return"string"==typeof t?f[t]?f[t](n):m(h(t,n).f):(t.splice||(w=t,n.splice?(t=n,n=i,i=null):t=e),n=n||function(){},"function"==typeof i&&(i=s,s=a),s?c(e,t,n,i):setTimeout(function(){c(e,t,n,i)
},4),v)},v.config=function(e){return w=e,v},l=function(e,n,i){n.splice||(i=n,n=[]),t(p,e)||t(b,e)||(b[e]=[e,n,i])
},l.amd={jQuery:!0}}(),l("models/element",[],function(){var i=n.Model.extend({defaults:{page:0,defaultValue:"",value:""},idAttribute:"name",initialize:function(){var t=this.attributes,n=t.form,i=t.page,s=e.trim(t.section||"");
n&&(i=t.page=n.getPage(t.page),i&&s?(s=t.section=i.getSection(s),s.add(this)):(i.add(this),delete t.section)),this.set("value",this.attributes.defaultValue),this.attributes.label||(this.attributes.prefix?this.set("label",this.attributes.name+" "+this.attributes.prefix):this.set("label",this.attributes.name))
},validate:function(e){var n={};return void 0===e&&(e=this.attributes),e.required&&!e.value&&(n.value=n.value||[],n.value.push({code:"REQUIRED"})),t.isEmpty(n)?void 0:n
},destroy:function(e){var t=this.attributes;return t._view&&(t._view.remove(),delete t._view),delete t.form,delete t.page,delete t.section,this.id=null,n.Model.prototype.destroy.call(this,e)
},val:function(e){return void 0===e?this.get("value"):(this.set("value",e),e)}},{create:function(e,n){var s,a,r,l,o,m=window.BlinkForms;
if(!e||!t.isObject(e))return new i;switch(n&&(e.form=n),e.type){case"subForm":r=m._models.SubFormElement,l=m._views.SubFormElement;
break;case"heading":r=m._models.HeadingElement,l=m._views.HeadingElement;break;case"message":r=m._models.MessageElement,l=m._views.MessageElement;
break;case"boolean":r=m._models.BooleanElement,l=m._views.BooleanElement;break;case"select":r=m._models.SelectElement,o=e.mode,o=o[0].toUpperCase()+o.substring(1),l=m._views["Choice"+o+"Element"];
break;case"multi":r=m._models.MultiElement,o=e.mode,o=o[0].toUpperCase()+o.substring(1),l=m._views["Choice"+o+"Element"];
break;case"time":case"date":case"datetime":r=m._models.DateElement,l=m._views.DateElement;
break;case"hidden":r=m._models.HiddenElement,l=m._views.HiddenElement;break;case"number":r=m._models.NumberElement,l=m._views.NumberElement;
break;case"telephone":r=m._models.TelephoneElement,l=m._views.TelephoneElement;break;
case"password":r=m._models.PasswordElement,l=m._views.PasswordElement;break;case"email":r=m._models.EmailElement,l=m._views.EmailElement;
break;case"url":r=m._models.URLElement,l=m._views.URLElement;break;case"text":r=m._models.TextElement,l=m._views.TextElement;
break;case"textarea":r=m._models.TextAreaElement,l=m._views.TextAreaElement;break;
default:r=m._models.Element,l=m._views.Element}return a=new r(e),s=new l({model:a}),a.attributes._view=s,a
}});return i}),l("collections/elements",["models/element"],function(e){var t=n.Collection.extend({model:e});
return t}),l("models/form",["collections/elements"],function(e){var i;return i=n.Model.extend({initialize:function(){var e,n=this,i=o._models.Page;
e=this.attributes._pages,delete this.attributes._pages,e=e&&t.isArray(e)?t.map(e,function(e){return i.create(e,n)
}):[],this.attributes.pages=e},destroy:function(e){var t=this.attributes;return t._view&&(t._view.remove(),delete t._view),delete this.$form,t.pages.forEach(function(t){t.destroy(e)
}),n.Model.prototype.destroy.call(this,e)},getPage:function(e){for(var t=window.BlinkForms._models.Page,n=this.get("pages");e>=n.length;)n.push(t.create({},this));
return n[e]},getElement:function(e){return this.attributes.elements.get(e)},data:function(){var e=s.defer(),t={},n=[];
return this.attributes.elements.forEach(function(e){var i,a,r=e.attributes.type;return"subForm"===r?(a=s.defer(),e.data().then(function(n){t[e.attributes.name]=n,a.resolve()
}),n.push(a.promise),void 0):(i=e.val(),(i||"number"==typeof i)&&(t[e.attributes.name]=i),void 0)
}),s.all(n).done(function(){e.resolve(t)}),e.promise}},{create:function(n){var s,a,r=(o._models.Page,o._models.Element);
return n&&t.isObject(n)?(s=n._elements,delete n._elements,a=new i(n),s=t.map(s,function(e){return r.create(e,a)
}),s=new e(s),a.set("elements",s),a):new i}})}),l("models/elements/subform",["models/form","models/element"],function(i,a){var r,l;
return l=n.Collection.extend({model:i}),r=a.extend({initialize:function(){a.prototype.initialize.call(this),this.attributes.forms=new l
},add:function(){var e=this.attributes,t=e.subForm,n=e.forms,s=e._view.$el,a=s.children(".ui-btn");
o.getDefinition(t,"add").then(function(e){var t,s;t=i.create(e),n.add(t),s=t.attributes._view=new o._views.SubForm({model:t}),t.$form=s.$el,s.render(),a.before(s.$el),s.$el.trigger("create")
})},remove:function(t){var n;return"number"==typeof t?(this.attributes.forms.at(t).destroy(),void 0):(n=t instanceof e?t:e(t),o.getForm(n).destroy(),void 0)
},data:function(){var e,n=s.defer();return e=this.attributes.forms.map(function(e){return e.data()
}),s.all(e).spread(function(){n.resolve(t.toArray(arguments))}).fail(n.reject),n.promise
}})}),l("models/section",["collections/elements","models/element"],function(e,i){var s;
return s=i.extend({initialize:function(){var t=o,n=this.attributes;n.form,n.elements=new e,n._view=new t._views.Section({model:this})
},destroy:function(e){var t=this.attributes;return t._view&&(t._view.remove(),delete t._view),delete t.form,t.elements.forEach(function(t){t.destroy(e)
}),n.Model.prototype.destroy.call(this,e)},add:function(e){this.attributes.elements.add(e)
}},{create:function(e,n){var i;return e&&t.isObject(e)?(n&&(e.form=n),i=new s(e)):new s
}})}),l("models/page",["collections/elements","models/section"],function(e,i){var s,a;
return a=n.Collection.extend({model:i}),s=n.Model.extend({defaults:{},initialize:function(){var n,s,r=o,l=this.attributes,m=l.form;
m.attributes.action,n=l.elements=new e,l._view=new r._views.Page({model:this}),s=m.attributes._sections,s&&t.isArray(s)?(s=t.map(s,function(e){return i.create(e,m)
}),s=new a(s)):s=new a,s.forEach(function(e){var t,n=e.attributes;n.section&&(t=s.get(n.section),t&&(n.section=t,t.add(e))),!n.section instanceof i&&delete n.section
}),l.sections=s},destroy:function(e){var t=this.attributes;return t._view&&(t._view.remove(),delete t._view),delete t.form,delete t.section,t.elements.forEach(function(t){t.destroy(e)
}),n.Model.prototype.destroy.call(this,e)},add:function(e){e instanceof i&&this.attributes.sections.add(e),e.attributes.section?this.add(e.attributes.section):this.attributes.elements.add(e)
},getSection:function(e){var t,n=this.attributes.sections;return t=n.get(e),this.add(t),t
}},{create:function(e,n){var i;return e&&t.isObject(e)?(n&&(e.form=n),i=new s(e)):new s
}})}),l("models/elements/heading",["models/element"],function(e){var t=e.extend({initialize:function(){e.prototype.initialize.call(this)
}});return t}),l("models/elements/message",["models/element"],function(e){var t=e.extend({initialize:function(){e.prototype.initialize.call(this)
}});return t}),l("models/elements/date",["models/element"],function(e){var t=e.extend({initialize:function(){e.prototype.initialize.call(this),this.on("change:_date change:_time",this.prepareValue),this.on("change:value",this.prepareDateTime),"now"===this.attributes.defaultValue&&this.set("value",(new Date).toISOString().replace(/\.\d{3}Z$/,""))
},prepareValue:function(){var e=this.attributes.type;"date"===e?this.set("value",this.attributes._date):"time"===e?this.set("value",this.attributes._time):this.set("value",this.attributes._date+"T"+this.attributes._time)
},prepareDateTime:function(){var e,t,n,i=this.attributes.type,s=this.attributes.value;
"date"===i?this.set("_date",s):"time"===i?this.set("_time",s):(e=this.attributes._time,t=this.attributes._date,n=s.split("T"),n[0]&&this.set("_date",n[0],{silent:!0}),n[1]&&this.set("_time",n[1],{silent:!0}),e!==this.attributes._time&&this.trigger("change:_time"),t!==this.attributes._date&&this.trigger("change:_date"))
},toDate:function(){var e,t=this.attributes.type;return"date"===t?new Date(this.attributes._date):"time"===t?(e=(new Date).toISOString(),e.replace(/T[0-9.:Z+\-]*$/,"T"+this.attributes._time)):new Date(this.attributes._date+"T"+this.attributes._time)
}});return t}),l("models/elements/hidden",["models/element"],function(e){var t=e.extend({initialize:function(){e.prototype.initialize.call(this)
}});return t}),l("models/elements/number",["models/element"],function(e){var n=e.extend({initialize:function(){e.prototype.initialize.call(this)
},set:function(n,i,s){var a;return null===n?this:(t.isObject(n)?(a=n,s=i):(a={})[n]=i,s=s||{},"undefined"!==a.value&&null!==a.value&&(a.value=Number(a.value)),e.prototype.set.call(this,a,s))
},validators:{minValue:function(e,t){return t>e},maxValue:function(e,t){return e>t
},maxDecimalPlaces:function(e,t){return RegExp("^(?:\\d*\\.\\d{1,"+t+"}|\\d+)$").test(e)
}},validate:function(e){var n={};return void 0===e&&(e=this.attributes),e.value&&(this.validators.maxValue(e.value,e.max)&&(n.value=n.value||[],n.value.push({code:"max value error"})),this.validators.minValue(e.value,e.min)&&(n.value=n.value||[],n.value.push({code:"min value error"})),this.validators.maxDecimalPlaces(e.value,e.maxDecimalPlaces)||(n.value=n.value||[],n.value.push({code:"maxinum decimal places error"}))),t.isEmpty(n)?void 0:n
}});return n}),l("models/elements/telephone",["models/element"],function(e){var t=e.extend({initialize:function(){e.prototype.initialize.call(this)
}});return t}),l("models/elements/text",["models/element"],function(e){var t=e.extend({initialize:function(){e.prototype.initialize.call(this)
}});return t}),l("models/elements/password",["models/elements/text"],function(e){var t=e.extend({initialize:function(){e.prototype.initialize.call(this)
}});return t}),l("models/elements/email",["models/elements/text"],function(e){var t=e.extend({initialize:function(){e.prototype.initialize.call(this)
}});return t}),l("models/elements/url",["models/elements/text"],function(e){var t=e.extend({initialize:function(){e.prototype.initialize.call(this)
}});return t}),l("models/elements/textarea",["models/elements/text"],function(e){var t=e.extend({initialize:function(){e.prototype.initialize.call(this)
}});return t}),l("models/elements/boolean",["models/element"],function(e){var t=e.extend({initialize:function(){e.prototype.initialize.call(this)
}});return t}),l("models/elements/select",["models/element"],function(e){var t=e.extend({initialize:function(){e.prototype.initialize.call(this)
}});return t}),l("models/elements/multi",["models/elements/select"],function(e){var t=e.extend({initialize:function(){e.prototype.initialize.call(this)
}});return t}),l("main",["require","models/form","models/elements/subform","models/page","models/section","models/element","models/elements/heading","models/elements/message","models/elements/date","models/elements/hidden","models/elements/number","models/elements/telephone","models/elements/password","models/elements/email","models/elements/url","models/elements/text","models/elements/textarea","models/elements/boolean","models/elements/select","models/elements/multi"],function(i){var s=o;
return t.extend(s,n.Events),s._models={Form:i("models/form"),SubFormElement:i("models/elements/subform"),Page:i("models/page"),Section:i("models/section"),Element:i("models/element"),HeadingElement:i("models/elements/heading"),MessageElement:i("models/elements/message"),DateElement:i("models/elements/date"),HiddenElement:i("models/elements/hidden"),NumberElement:i("models/elements/number"),TelephoneElement:i("models/elements/telephone"),PasswordElement:i("models/elements/password"),EmailElement:i("models/elements/email"),URLElement:i("models/elements/url"),TextElement:i("models/elements/text"),TextAreaElement:i("models/elements/textarea"),BooleanElement:i("models/elements/boolean"),SelectElement:i("models/elements/select"),MultiElement:i("models/elements/multi")},s.initialize=function(t){var n,i;
if(!e.isPlainObject(t))throw Error("unexpected Form definition structure");n=s._models.Form.create(t),s.currentFormObject=n,i=n.attributes._view=new s._views.Form({model:n}),n.$form=i.$el,i.render()
},s}),l("views/jqm/form",[],function(){var e=n.View.extend({tagName:"form",attributes:{novalidate:"novalidate"},remove:function(){return this.$el.removeData("model"),n.View.prototype.remove.call(this)
},render:function(){var e=this,n=this.model.attributes.pages;this.$el.empty(),this.$el.attr("data-form",this.model.attributes.name),this.$el.data("model",this.model),t.forEach(n,function(t){var n=t.attributes._view;
n.render(),e.$el.append(n.el)})}});return e}),l("views/jqm/subform",["views/jqm/form"],function(t){var n,i=o;
return n=t.extend({tagName:"section",attributes:{},remove:function(){return this.$el.children(".ui-btn").children("button").off("click"),t.prototype.remove.call(this)
},render:function(){var n=e("<button></button>").attr({type:"button","data-icon":"minus","data-action":"remove"}).text(this.model.attributes.name);
n.on("click",this.onRemoveClick),t.prototype.render.call(this),this.$el.prepend(n)
},onRemoveClick:function(){var e=i.getForm(this).$form;i.getElement(e).remove(e)}})
}),l("views/jqm/element",[],function(){var t=n.View.extend({tagName:"div",attributes:{"data-role":"fieldcontain","data-rv-class":"m.class"},initialize:function(){var e=this.model;
this.$el.attr("data-name",e.attributes.name),this.$el.data("model",e),this.bindRivets()
},remove:function(){return this.$el.removeData("model"),this.model.off(null,null,this),this.rivet&&this.rivet.unbind(),n.View.prototype.remove.call(this)
},renderLabel:function(){var t=e(document.createElement("label"));t.attr({"data-rv-text":"m.label","class":"ui-input-text"}),this.$el.append(t)
},render:function(){var t,n=this.model.get("type"),i=this.model.get("name");switch(this.$el.empty(),this.renderLabel(),n){case"file":t=e('<input type="file" />');
break;case"image":t=e('<input type="file" />')}t.attr({name:i,"data-rv-value":"m.value"}),this.$el.append(t),this.bindRivets()
},bindRivets:function(){this.rivet&&this.rivet.unbind(),this.rivet=i.bind(this.el,{m:this.model})
}});return t}),l("views/jqm/elements/subform",["views/jqm/element"],function(t){var n;
return n=t.extend({tagName:"section",remove:function(){return this.$el.children(".ui-btn").children("button").off("click"),t.prototype.remove.call(this)
},render:function(){var t=this.model.attributes.subForm,n=e("<button></button>").attr({type:"button","data-icon":"plus","data-action":"add"}).text(t);
n.on("click",this.onAddClick),this.$el.attr("data-form",t),this.$el.prepend(n)},onAddClick:function(){var e=o.getElement(this);
e.add()}})}),l("views/jqm/page",[],function(){var e=n.View.extend({tagName:"section",initialize:function(){var e=this.model.attributes;
e.class&&this.$el.addClass(e.class)},render:function(){var e=this;this.model.attributes.form,this.$el.empty(),this.model.get("elements").forEach(function(t){var n=t.attributes._view,i=t.attributes.type;
n.render(),"hidden"===i?e.$el.prepend(n.el):e.$el.append(n.el)})}});return e}),l("views/jqm/section",["views/jqm/page"],function(e){var t=e.extend({tagName:"section",events:{},initialize:function(){var t=this.model;
this.$el.attr("data-name",t.attributes.name),e.prototype.initialize.call(this)}});
return t}),l("views/jqm/elements/heading",["views/jqm/element"],function(n){var i=n.extend({attributes:{"data-rv-text":"m.text"},initialize:function(){var i;
this.model&&t.isNumber(this.model.attributes.level)&&(this.tagName="h"+this.model.attributes.level,i=e("<"+this.tagName+"></"+this.tagName+">"),i.attr(this.attributes),this.setElement(i[0])),n.prototype.initialize.call(this)
},render:function(){this.bindRivets()}});return i}),l("views/jqm/elements/message",["views/jqm/element"],function(e){var t=e.extend({tagName:"div",attributes:{"data-rv-html":"m.html","data-rv-class":"m.class"},render:function(){this.bindRivets()
}});return t}),l("views/jqm/elements/date",["views/jqm/element"],function(t){var n=t.extend({renderDate:function(){var t=e(""),n=this.model.attributes.name;
return t=e('<input type="date" />'),t.attr({name:n+"_date","data-rv-value":"m._date"}),this.$el.append(t),this
},renderTime:function(){var t=e(""),n=this.model.attributes.name;return t=e('<input type="time" />'),t.attr({name:n+"_time","data-rv-value":"m._time"}),this.$el.append(t),this
},render:function(){var e=this.model.get("type");return this.model.get("name"),this.$el.empty(),this.renderLabel(),"time"!==e&&this.renderDate(),"date"!==e&&this.renderTime(),this.bindRivets(),this
}});return n}),l("views/jqm/elements/hidden",["views/jqm/element"],function(t){var n=t.extend({initialize:function(){this.setElement(e('<input type="hidden" />')[0]),t.prototype.initialize.call(this)
},render:function(){var e=this.model.get("name");this.$el.attr({name:e,"data-rv-value":"m.value"}),this.bindRivets()
}});return n}),l("views/jqm/elements/number",["views/jqm/element"],function(n){var i=n.extend({render:function(){var n,i=this.model.attributes,s=i.name,a=i.min,r=i.max;
i.step||1,this.$el.empty(),this.renderLabel(),t.isNumber(a)&&t.isNumber(r)?(n=e('<input type="range" />'),n.attr({min:a,max:r,"data-highlight":!0}),e(document).one("pageinit",e.proxy(this.bindRivets,this))):n=e('<input type="number" />'),n.attr({name:s,"data-rv-value":"m.value","data-rv-step":"m.step"}),this.$el.append(n),this.bindRivets()
}});return i}),l("views/jqm/elements/telephone",["views/jqm/element"],function(t){var n=t.extend({render:function(){var t,n=this.model.get("name");
this.$el.empty(),this.renderLabel(),t=e('<input type="tel" />'),t.attr({name:n,"data-rv-value":"m.value"}),this.$el.append(t),this.bindRivets()
}});return n}),l("views/jqm/elements/text",["views/jqm/element"],function(t){var n=t.extend({render:function(){var t,n=this.model.get("name");
this.$el.empty(),this.renderLabel(),t=e('<input type="text" />'),t.attr({name:n,"data-rv-value":"m.value"}),this.$el.append(t),this.bindRivets()
}});return n}),l("views/jqm/elements/password",["views/jqm/elements/text"],function(t){var n=t.extend({render:function(){var t,n=this.model.get("name");
this.$el.empty(),this.renderLabel(),t=e('<input type="password" />'),t.attr({name:n,"data-rv-value":"m.value"}),this.$el.append(t),this.bindRivets()
}});return n}),l("views/jqm/elements/email",["views/jqm/elements/text"],function(t){var n=t.extend({render:function(){var t,n=this.model.get("name");
this.$el.empty(),this.renderLabel(),t=e('<input type="email" />'),t.attr({name:n,"data-rv-value":"m.value"}),this.$el.append(t),this.bindRivets()
}});return n}),l("views/jqm/elements/url",["views/jqm/elements/text"],function(t){var n=t.extend({render:function(){var t,n=this.model.get("name");
this.$el.empty(),this.renderLabel(),t=e('<input type="text" />'),t.attr({name:n,"data-rv-value":"m.value"}),this.$el.append(t),this.bindRivets()
}});return n}),l("views/jqm/elements/textarea",["views/jqm/elements/text"],function(t){var n=t.extend({render:function(){var t,n=this.model.get("name");
this.$el.empty(),this.renderLabel(),t=e("<textarea />"),t.attr({name:n,"data-rv-value":"m.value"}),this.$el.append(t),this.bindRivets()
}});return n}),l("views/jqm/elements/boolean",["views/jqm/element"],function(n){var i=n.extend({render:function(){var n;
this.model.attributes.type,this.model.attributes.name,this.$el.empty(),this.renderLabel(),n=e("<select />"),n.attr({"data-rv-value":"m.value","data-role":"slider"}),t.forEach(this.model.attributes.options,function(t,i){var s=e('<option value="'+i+'">'+t+"</option>");
n.append(s)}),this.$el.append(n),this.bindRivets(),this.model.on("change:value",this.onValueChange,this)
},onValueChange:function(){this.$el.children("select").slider("refresh")}});return i
}),l("views/jqm/elements/choice",["views/jqm/element"],function(e){var t=e.extend({});
return t}),l("views/jqm/elements/choicecollapsed",["views/jqm/elements/choice"],function(n){var i=n.extend({render:function(){var n,i=this.model.attributes.type,s=this.model.attributes.name;
this.$el.empty(),this.renderLabel(),n=e("<select />"),n.attr({"data-rv-value":"m.value"}),"select"===i?(n.attr({name:s}),n.append("<option>select one...</option>")):(n.attr({name:s+"[]",multiple:"multiple","data-native-menu":!1}),n.append("<option>select one or more...</option>")),t.forEach(this.model.attributes.options,function(t,i){var s=e('<option value="'+i+'">'+t+"</option>");
n.append(s)}),this.$el.append(n),this.bindRivets(),this.model.on("change:value",this.onValueChange,this)
},onValueChange:function(){this.$el.find("select").selectmenu("refresh")}});return i
}),l("views/jqm/elements/choiceexpanded",["views/jqm/elements/choice"],function(n){var i=n.extend({remove:function(){var e=this.attributes.type;
return"select"!==e&&this.$el.find("input").off("click"),n.prototype.remove.call(this)
},render:function(){var n,i,s=this,a=this.model.attributes,r=a.type,l=a.name,o="select"===r?"radio":"checkbox",m="select"===r?l+"_"+s.cid:l+"[]";
this.$el.empty(),n=e("<fieldset></fieldset>").attr({"data-role":"controlgroup"}),"horizontal"===a.layout&&n.attr({"data-type":"horizontal"}),i=e("<legend></legend>").text(a.label),n.prepend(i),t.forEach(a.options,function(t,i){var s=e("<label>"+t+"</label>"),a=e('<input type="'+o+'" />');
a.attr({name:m,"data-rv-checked":"m.value",value:i}),s.prepend(a),n.append(s)}),this.$el.append(n),"select"===r?(this.bindRivets(),this.model.on("change:value",this.onSelectValueChange,this)):(n.find("input").on("click",{view:this,model:this.model},this.onMultiInputClick),this.model.on("change:value",this.onMultiValueChange,this))
},onMultiInputClick:function(n){var i,s=n.data.view,a=n.data.model,r=s.$el.find("input:checked");
i=t.map(r,function(t){return e(t).val()}),a.set("value",i)},onMultiValueChange:function(){var n=this,i=this.model,s=n.$el.find("input[type=radio],input[type=checkbox]"),a=i.attributes.value;
t.isArray(a)||(a=[]),s.each(function(n,i){var s=e(i);s.prop("checked",-1!==t.indexOf(a,s.val()))
}),s.checkboxradio("refresh")},onSelectValueChange:function(){var e=this,t=e.$el.find("input[type=radio],input[type=checkbox]");
t.checkboxradio("refresh")}});return i}),l("views/jqm",["require","views/jqm/form","views/jqm/subform","views/jqm/elements/subform","views/jqm/page","views/jqm/section","views/jqm/element","views/jqm/elements/heading","views/jqm/elements/message","views/jqm/elements/date","views/jqm/elements/hidden","views/jqm/elements/number","views/jqm/elements/telephone","views/jqm/elements/password","views/jqm/elements/email","views/jqm/elements/url","views/jqm/elements/text","views/jqm/elements/textarea","views/jqm/elements/boolean","views/jqm/elements/choicecollapsed","views/jqm/elements/choiceexpanded"],function(t){var n=o;
return e.mobile.page.prototype.options.keepNative="[type^=time], [type^=date]",i.configure({prefix:"rv",adapter:{subscribe:function(e,t,n){e.on("change:"+t,n)
},unsubscribe:function(e,t,n){e.off("change:"+t,n)},read:function(e,t){return e.get(t)
},publish:function(e,t,n){e.set(t,n)}}}),n.getForm=function(t){for(var i,s=n.currentFormObject,a=t instanceof e?t:e(t),r=a.closest("[data-form]");r.length>0;){if(e.hasData(r[0])&&(i=r.data("model"),i instanceof n._models.Form))return i;
r=a.parent().closest("[data-form]")}return s&&s.$form&&s.$form.parent().length>0?n.currentFormObject:null
},n.getElement=function(t){for(var i,s=(n.currentFormObject,t instanceof e?t:e(t)),a=s.closest("[data-name]");a.length>0;){if(e.hasData(a[0])&&(i=a.data("model"),i instanceof n._models.Element))return i;
a=s.parent().closest("[data-name]")}return null},{Form:t("views/jqm/form"),SubForm:t("views/jqm/subform"),SubFormElement:t("views/jqm/elements/subform"),Page:t("views/jqm/page"),Section:t("views/jqm/section"),Element:t("views/jqm/element"),HeadingElement:t("views/jqm/elements/heading"),MessageElement:t("views/jqm/elements/message"),DateElement:t("views/jqm/elements/date"),HiddenElement:t("views/jqm/elements/hidden"),NumberElement:t("views/jqm/elements/number"),TelephoneElement:t("views/jqm/elements/telephone"),PasswordElement:t("views/jqm/elements/password"),EmailElement:t("views/jqm/elements/email"),URLElement:t("views/jqm/elements/url"),TextElement:t("views/jqm/elements/text"),TextAreaElement:t("views/jqm/elements/textarea"),BooleanElement:t("views/jqm/elements/boolean"),ChoiceCollapsedElement:t("views/jqm/elements/choicecollapsed"),ChoiceExpandedElement:t("views/jqm/elements/choiceexpanded")}
}),r(["main","views/jqm"],function(e,t){e._views=t}),o});
//@ sourceMappingURL=BlinkForms-jQueryMobile.js.map