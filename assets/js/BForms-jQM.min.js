define("views/jqm/form",["underscore","backbone"],function(e,t){var n=t.View.extend({tagName:"form",attributes:{},events:{},render:function(){var t=this,n=this.model.attributes.pages;
this.$el.empty(),e.forEach(n,function(e){var n=e.attributes._view;n.render(),t.$el.append(n.el)
})}});return n}),define("views/jqm/page",["jquery","underscore","backbone"],function(e,t,n){var i=n.View.extend({tagName:"section",attributes:{"data-role":"page"},events:{},intialize:function(){},render:function(){var t=e('<div data-role="content"></div>'),n=this.model;
n.attributes.form,this.$el.empty(),this.model.get("elements").forEach(function(e){var n=e.attributes._view,i=e.attributes.type;
n.render(),"hidden"===i?t.prepend(n.el):t.append(n.el)}),this.$el.append(t)}});return i
}),define("views/jqm/element",["jquery","underscore","backbone","rivets"],function(e,t,n,i){var s=n.View.extend({tagName:"div",attributes:{"data-role":"fieldcontain"},events:{},initialize:function(){this.bindRivets()
},renderLabel:function(){var t=e(document.createElement("label"));t.attr({"data-rv-text":"m.label","class":"ui-input-text"}),this.$el.append(t)
},render:function(){var t,n=this.model.get("type"),i=this.model.get("name");switch(this.$el.empty(),this.renderLabel(),n){case"file":t=e('<input type="file" />');
break;case"image":t=e('<input type="file" />')}t.attr({name:i,"data-rv-value":"m.value"}),this.$el.append(t),this.bindRivets()
},bindRivets:function(){this.rivet&&this.rivet.unbind(),this.rivet=i.bind(this.el,{m:this.model})
}});return s}),define("views/jqm/elements/heading",["jquery","underscore","backbone","views/jqm/element"],function(e,t,n,i){var s=i.extend({attributes:{"data-rv-text":"m.text"},initialize:function(){var n;
this.model&&t.isNumber(this.model.attributes.level)&&(this.tagName="h"+this.model.attributes.level,n=e("<"+this.tagName+"></"+this.tagName+">"),n.attr(this.attributes),this.setElement(n[0])),i.prototype.initialize.call(this)
},render:function(){this.bindRivets()}});return s}),define("views/jqm/elements/message",["jquery","underscore","backbone","views/jqm/element"],function(e,t,n,i){var s=i.extend({tagName:"div",attributes:{"data-rv-html":"m.html"},render:function(){this.bindRivets()
}});return s}),define("views/jqm/elements/date",["jquery","underscore","backbone","views/jqm/element"],function(e,t,n,i){var s=i.extend({renderDate:function(){var t=e(""),n=this.model.attributes.name;
return t=e('<input type="date" style="width: 10em" />'),t.attr({name:n+"_date","data-rv-value":"m._date"}),this.$el.append(t),this
},renderTime:function(){var t=e(""),n=this.model.attributes.name;return t=e('<input type="time" style="width: 8em" />'),t.attr({name:n+"_time","data-rv-value":"m._time"}),this.$el.append(t),this
},render:function(){var e=this.model.get("type");return this.model.get("name"),this.$el.empty(),this.renderLabel(),"time"!==e&&this.renderDate(),"date"!==e&&this.renderTime(),this.bindRivets(),this
}});return s}),define("views/jqm/elements/hidden",["jquery","underscore","backbone","views/jqm/element"],function(e,t,n,i){var s=i.extend({initialize:function(){this.setElement(e('<input type="hidden" />')[0]),i.prototype.initialize.call(this)
},render:function(){var e=this.model.get("name");this.$el.attr({name:e,"data-rv-value":"m.value"}),this.bindRivets()
}});return s}),define("views/jqm/elements/number",["jquery","underscore","backbone","views/jqm/element"],function(e,t,n,i){var s=i.extend({render:function(){var t,n=this.model.get("name");
this.$el.empty(),this.renderLabel(),t=e('<input type="number" />'),t.attr({name:n,"data-rv-value":"m.value"}),this.$el.append(t),this.bindRivets()
}});return s}),define("views/jqm/elements/telephone",["jquery","underscore","backbone","views/jqm/element"],function(e,t,n,i){var s=i.extend({render:function(){var t,n=this.model.get("name");
this.$el.empty(),this.renderLabel(),t=e('<input type="tel" />'),t.attr({name:n,"data-rv-value":"m.value"}),this.$el.append(t),this.bindRivets()
}});return s}),define("views/jqm/elements/text",["jquery","underscore","backbone","views/jqm/element"],function(e,t,n,i){var s=i.extend({render:function(){var t,n=this.model.get("name");
this.$el.empty(),this.renderLabel(),t=e('<input type="text" />'),t.attr({name:n,"data-rv-value":"m.value"}),this.$el.append(t),this.bindRivets()
}});return s}),define("views/jqm/elements/password",["jquery","underscore","backbone","views/jqm/elements/text"],function(e,t,n,i){var s=i.extend({render:function(){var t,n=this.model.get("name");
this.$el.empty(),this.renderLabel(),t=e('<input type="password" />'),t.attr({name:n,"data-rv-value":"m.value"}),this.$el.append(t),this.bindRivets()
}});return s}),define("views/jqm/elements/email",["jquery","underscore","backbone","views/jqm/elements/text"],function(e,t,n,i){var s=i.extend({render:function(){var t,n=this.model.get("name");
this.$el.empty(),this.renderLabel(),t=e('<input type="email" />'),t.attr({name:n,"data-rv-value":"m.value"}),this.$el.append(t),this.bindRivets()
}});return s}),define("views/jqm/elements/url",["jquery","underscore","backbone","views/jqm/elements/text"],function(e,t,n,i){var s=i.extend({render:function(){var t,n=this.model.get("name");
this.$el.empty(),this.renderLabel(),t=e('<input type="text" />'),t.attr({name:n,"data-rv-value":"m.value"}),this.$el.append(t),this.bindRivets()
}});return s}),define("views/jqm/elements/textarea",["jquery","underscore","backbone","views/jqm/elements/text"],function(e,t,n,i){var s=i.extend({render:function(){var t,n=this.model.get("name");
this.$el.empty(),this.renderLabel(),t=e("<textarea />"),t.attr({name:n,"data-rv-value":"m.value"}),this.$el.append(t),this.bindRivets()
}});return s}),define("views/jqm/elements/choice",["jquery","underscore","backbone","views/jqm/element"],function(e,t,n,i){var s=i.extend({});
return s}),define("views/jqm/elements/choicecollapsed",["jquery","underscore","backbone","views/jqm/elements/choice"],function(e,t,n,i){var s=i.extend({render:function(){var n,i=this.model.attributes.type,s=this.model.attributes.name;
this.$el.empty(),this.renderLabel(),n=e("<select />"),n.attr({"data-rv-value":"m.value"}),"select"===i?(n.attr({name:s}),n.append("<option>select one...</option>")):(n.attr({name:s+"[]",multiple:"multiple","data-native-menu":!1}),n.append("<option>select one or more...</option>")),t.forEach(this.model.attributes.options,function(t,i){var s=e('<option value="'+i+'">'+t+"</option>");
n.append(s)}),this.$el.append(n),this.bindRivets()}});return s}),define("views/jqm/elements/choiceexpanded",["jquery","underscore","backbone","views/jqm/elements/choice"],function(e,t,n,i){var s=i.extend({render:function(){var n,i,s=this,a=this.model.attributes.type,l=this.model.attributes.name,r="select"===a?"radio":"checkbox",m="select"===a?l+"_"+s.cid:l+"[]";
this.$el.empty(),n=e("<fieldset></fieldset>").attr({"data-role":"controlgroup"}),i=e("<legend></legend>").text(this.model.attributes.label),n.prepend(i),t.forEach(this.model.attributes.options,function(t,i){var s=e("<label>"+t+"</label>"),a=e('<input type="'+r+'" />');
a.attr({name:m,"data-rv-checked":"m.value",value:i}),s.prepend(a),n.append(s)}),this.$el.append(n),"select"===a?(this.bindRivets(),this.model.on("change:value",this.onSelectValueChange,this)):(n.find("input").on("click",{view:this,model:this.model},this.onMultiInputClick),this.model.on("change:value",this.onMultiValueChange,this))
},onMultiInputClick:function(n){var i,s=n.data.view,a=n.data.model,l=s.$el.find("input:checked");
i=t.map(l,function(t){return e(t).val()}),a.set("value",i)},onMultiValueChange:function(){var n=this,i=this.model,s=n.$el.find("input[type=radio],input[type=checkbox]"),a=i.attributes.value;
t.isArray(a)||(a=[]),s.each(function(n,i){var s=e(i);s.prop("checked",-1!==t.indexOf(a,s.val()))
}),s.checkboxradio("refresh")},onSelectValueChange:function(){var e=this,t=e.$el.find("input[type=radio],input[type=checkbox]");
t.checkboxradio("refresh")}});return s}),define("BForms-jQM",["require","jquery","jquerymobile","rivets","views/jqm/form","views/jqm/page","views/jqm/element","views/jqm/elements/heading","views/jqm/elements/message","views/jqm/elements/date","views/jqm/elements/hidden","views/jqm/elements/number","views/jqm/elements/telephone","views/jqm/elements/password","views/jqm/elements/email","views/jqm/elements/url","views/jqm/elements/text","views/jqm/elements/textarea","views/jqm/elements/choicecollapsed","views/jqm/elements/choiceexpanded"],function(e){var t=(e("jquery"),e("jquerymobile"),e("rivets"));
return t.configure({prefix:"rv",adapter:{subscribe:function(e,t,n){e.on("change:"+t,n)
},unsubscribe:function(e,t,n){e.off("change:"+t,n)},read:function(e,t){return e.get(t)
},publish:function(e,t,n){e.set(t,n)}}}),{Form:e("views/jqm/form"),Page:e("views/jqm/page"),Element:e("views/jqm/element"),HeadingElement:e("views/jqm/elements/heading"),MessageElement:e("views/jqm/elements/message"),DateElement:e("views/jqm/elements/date"),HiddenElement:e("views/jqm/elements/hidden"),NumberElement:e("views/jqm/elements/number"),TelephoneElement:e("views/jqm/elements/telephone"),PasswordElement:e("views/jqm/elements/password"),EmailElement:e("views/jqm/elements/email"),URLElement:e("views/jqm/elements/url"),TextElement:e("views/jqm/elements/text"),TextAreaElement:e("views/jqm/elements/textarea"),ChoiceCollapsedElement:e("views/jqm/elements/choicecollapsed"),ChoiceExpandedElement:e("views/jqm/elements/choiceexpanded")}
}),define("models/element",["underscore","backbone"],function(e,t){var n=t.Model.extend({defaults:{page:0,defaultValue:"",value:""},idAttribute:"name",initialize:function(){var t=this.attributes,n=t.form;
t.page,n&&e.isNumber(t.page)&&(t.page=n.getPage(t.page),t.page.add(this)),this.set("value",this.attributes.defaultValue),this.attributes.label||this.set("label",this.attributes.name)
},val:function(e){return void 0===e?this.get("value"):(this.set("value",e),e)}},{create:function(t,i,s){var a,l,r,m,o,d,u=window.BlinkForms;
if(!t||!e.isObject(t))return new n;switch(a=t.default||{},i&&t[i]&&e.extend(a,t[i]),s&&(a.form=s),a.type){case"heading":m=u._models.HeadingElement,o=u._views.HeadingElement;
break;case"message":m=u._models.MessageElement,o=u._views.MessageElement;break;case"select":m=u._models.SelectElement,d=a.mode,d=d[0].toUpperCase()+d.substring(1),o=u._views["Choice"+d+"Element"];
break;case"multi":m=u._models.MultiElement,d=a.mode,d=d[0].toUpperCase()+d.substring(1),o=u._views["Choice"+d+"Element"];
break;case"time":case"date":case"datetime":m=u._models.DateElement,o=u._views.DateElement;
break;case"hidden":m=u._models.HiddenElement,o=u._views.HiddenElement;break;case"number":m=u._models.NumberElement,o=u._views.NumberElement;
break;case"telephone":m=u._models.TelephoneElement,o=u._views.TelephoneElement;break;
case"password":m=u._models.PasswordElement,o=u._views.PasswordElement;break;case"email":m=u._models.EmailElement,o=u._views.EmailElement;
break;case"url":m=u._models.URLElement,o=u._views.URLElement;break;case"text":m=u._models.TextElement,o=u._views.TextElement;
break;case"textarea":m=u._models.TextAreaElement,o=u._views.TextAreaElement;break;
default:m=u._models.Element,o=u._views.Element}return r=new m(a),l=new o({model:r}),r.attributes._view=l,r
}});return n}),define("collections/elements",["underscore","backbone","models/element"],function(e,t,n){var i=t.Collection.extend({model:n});
return i}),define("models/form",["underscore","backbone","q","collections/elements"],function(e,t,n,i){var s;
return s=t.Model.extend({initialize:function(){var t,n=this,i=window.BlinkForms._models.Page,s=this.attributes.action;
t=this.attributes._pages,delete this.attributes._pages,t=t&&e.isArray(t)?e.map(t,function(e){return i.create(e,s,n)
}):[],this.attributes.pages=t},getPage:function(e){for(var t=window.BlinkForms._models.Page,n=this.get("pages");e>=n.length;)n.push(t.create({},null,this));
return n[e]},getElement:function(e){return this.attributes.elements.get(e)},data:function(){var e=n.defer(),t={};
return this.attributes.elements.forEach(function(e){var n=e.val();(n||"number"==typeof n)&&(t[e.attributes.name]=n)
}),e.resolve(t),e.promise}},{create:function(t,n){var a,l,r,m,o=(window.BlinkForms._models.Page,window.BlinkForms._models.Element);
return t&&e.isObject(t)?(a=t.default||{},l=a._elements,delete a._elements,n&&t[n]?(r=t[n]._elements,delete t[n]._elements,e.extend(a,t[n]),m=new s(a),l=e.filter(l,function(e){return-1!==r.indexOf(e.default.name)
}),l=e.sortBy(l,function(e){return r.indexOf(e.default.name)})):m=new s(a),l=e.map(l,function(e){return o.create(e,n,m)
}),l=new i(l),m.set("elements",l),m):new s}})}),define("models/page",["underscore","backbone","collections/elements"],function(e,t,n){var i;
return i=t.Model.extend({defaults:{},initialize:function(){var e=window.BlinkForms;
this.attributes.elements=new n,this.attributes._view=new e._views.Page({model:this})
},add:function(e){this.attributes.elements.add(e)}},{create:function(t,n,s){var a,l;
return t&&e.isObject(t)?(a=t.default||{},n&&t[n]&&e.extend(a,t[n]),s&&(a.form=s),l=new i(a)):new i
}})}),define("models/elements/heading",["underscore","backbone","models/element"],function(e,t,n){var i=n.extend({initialize:function(){n.prototype.initialize.call(this)
}});return i}),define("models/elements/message",["underscore","backbone","models/element"],function(e,t,n){var i=n.extend({initialize:function(){n.prototype.initialize.call(this)
}});return i}),define("models/elements/date",["underscore","backbone","models/element"],function(e,t,n){var i=n.extend({initialize:function(){n.prototype.initialize.call(this),this.on("change:_date change:_time",this.prepareValue),this.on("change:value",this.prepareDateTime)
},prepareValue:function(){var e=this.attributes.type;"date"===e?this.set("value",this.attributes._date):"time"===e?this.set("value",this.attributes._time):this.set("value",this.attributes._date+"T"+this.attributes._time)
},prepareDateTime:function(){var e,t,n,i=this.attributes.type,s=this.attributes.value;
"date"===i?this.set("_date",s):"time"===i?this.set("_time",s):(e=this.attributes._time,t=this.attributes._date,n=s.split("T"),n[0]&&this.set("_date",n[0],{silent:!0}),n[1]&&this.set("_time",n[1],{silent:!0}),e!==this.attributes._time&&this.trigger("change:_time"),t!==this.attributes._date&&this.trigger("change:_date"))
}});return i}),define("models/elements/hidden",["underscore","backbone","models/element"],function(e,t,n){var i=n.extend({initialize:function(){n.prototype.initialize.call(this)
}});return i}),define("models/elements/number",["underscore","backbone","models/element"],function(e,t,n){var i=n.extend({initialize:function(){n.prototype.initialize.call(this)
}});return i}),define("models/elements/telephone",["underscore","backbone","models/element"],function(e,t,n){var i=n.extend({initialize:function(){n.prototype.initialize.call(this)
}});return i}),define("models/elements/text",["underscore","backbone","models/element"],function(e,t,n){var i=n.extend({initialize:function(){n.prototype.initialize.call(this)
}});return i}),define("models/elements/password",["underscore","backbone","models/elements/text"],function(e,t,n){var i=n.extend({initialize:function(){n.prototype.initialize.call(this)
}});return i}),define("models/elements/email",["underscore","backbone","models/elements/text"],function(e,t,n){var i=n.extend({initialize:function(){n.prototype.initialize.call(this)
}});return i}),define("models/elements/url",["underscore","backbone","models/elements/text"],function(e,t,n){var i=n.extend({initialize:function(){n.prototype.initialize.call(this)
}});return i}),define("models/elements/textarea",["underscore","backbone","models/elements/text"],function(e,t,n){var i=n.extend({initialize:function(){n.prototype.initialize.call(this)
}});return i}),define("models/elements/select",["underscore","backbone","models/element"],function(e,t,n){var i=n.extend({initialize:function(){n.prototype.initialize.call(this)
}});return i}),define("models/elements/multi",["underscore","backbone","models/elements/select"],function(e,t,n){var i=n.extend({initialize:function(){n.prototype.initialize.call(this)
}});return i}),define("BForms",["require","jquery","models/form","models/page","models/element","models/elements/heading","models/elements/message","models/elements/date","models/elements/hidden","models/elements/number","models/elements/telephone","models/elements/password","models/elements/email","models/elements/url","models/elements/text","models/elements/textarea","models/elements/select","models/elements/multi"],function(e){var t=e("jquery"),n=window.BlinkForms||{};
return n._models={Form:e("models/form"),Page:e("models/page"),Element:e("models/element"),HeadingElement:e("models/elements/heading"),MessageElement:e("models/elements/message"),DateElement:e("models/elements/date"),HiddenElement:e("models/elements/hidden"),NumberElement:e("models/elements/number"),TelephoneElement:e("models/elements/telephone"),PasswordElement:e("models/elements/password"),EmailElement:e("models/elements/email"),URLElement:e("models/elements/url"),TextElement:e("models/elements/text"),TextAreaElement:e("models/elements/textarea"),SelectElement:e("models/elements/select"),MultiElement:e("models/elements/multi")},n.initialize=function(e){var i;
if(!t.isPlainObject(e)||"object"!==t.type(e.default))throw Error("unexpected Form definition structure");
i=n._models.Form.create(e,"add"),n.currentFormObject||(n.currentFormObject=i)},window.BlinkForms=n,n
});